<!DOCTYPE html>
<html>
  <head>
    <title>Facebook hacker cup: Geometric approach to double squares problem</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="60x60" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="72x72" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="76x76" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="114x114" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="120x120" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="144x144" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="152x152" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="apple-touch-icon" sizes="180x180" href="//raghakot.github.io/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="icon" type="image/png" href="//raghakot.github.io/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1484258545462" sizes="32x32">
    <link rel="icon" type="image/png" href="//raghakot.github.io/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1484258545462" sizes="194x194">
    <link rel="icon" type="image/png" href="//raghakot.github.io/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1484258545462" sizes="96x96">
    <link rel="icon" type="image/png" href="//raghakot.github.io/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1484258545462" sizes="192x192">
    <link rel="icon" type="image/png" href="//raghakot.github.io/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1484258545462" sizes="16x16">
    <link rel="manifest" href="//raghakot.github.io/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1484258545462">
    <link rel="shortcut icon" href="//raghakot.github.io/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1484258545462">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//raghakot.github.io/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1484258545462">
    <meta name="msapplication-config" content="//raghakot.github.io/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1484258545462">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//raghakot.github.io/themes/uno-zen/assets/css/uno-zen.css?v=1484258545462" />
    <link rel="canonical" href="https://raghakot.github.io/2011/01/11/Facebook-hacker-cup-Geometric-approach-to-double-squares-problem.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Ragha&#x27;s Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Facebook hacker cup: Geometric approach to double squares problem" />
    <meta property="og:description" content="Given an integer \(N\), we need to find the number of integral pairs \((x, y) \mid x^2 + y^2 &#x3D; N\), \(N \in [0, 2147483647]\), with a maximum of 100 such numbers in a file. Solution Geometrically, we know that \(x^2 + y^2 &#x3D; r\) represents a circle centered at" />
    <meta property="og:url" content="https://raghakot.github.io/2011/01/11/Facebook-hacker-cup-Geometric-approach-to-double-squares-problem.html" />
    <meta property="article:tag" content="competitions" />
    <meta property="article:tag" content=" migrated" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Facebook hacker cup: Geometric approach to double squares problem" />
    <meta name="twitter:description" content="Given an integer \(N\), we need to find the number of integral pairs \((x, y) \mid x^2 + y^2 &#x3D; N\), \(N \in [0, 2147483647]\), with a maximum of 100 such numbers in a file. Solution Geometrically, we know that \(x^2 + y^2 &#x3D; r\) represents a circle centered at" />
    <meta name="twitter:url" content="https://raghakot.github.io/2011/01/11/Facebook-hacker-cup-Geometric-approach-to-double-squares-problem.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Ragha&#x27;s Blog" href="https://raghakot.github.io/rss/" />
  </head>
  <body class="post-template tag-competitions tag-migrated">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url(images/cover.jpg) center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
    
          <hr class="divider long" />
          <p>Musings on intriguing phenomenon</p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
              
              
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/raghakot" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.linkedin.com/in/raghavendra-kotikalapudi-79528411" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- Email -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="mailto:ragha@outlook.com" title="Email ragha@outlook.com">
                      <i class='icon icon-mail'></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-competitions tag-migrated">
    <header>
      <div class="post meta">
        <time datetime="11 Jan 2011">11 Jan 2011</time>
        <span class="post tags">in <a href="https://raghakot.github.io/tag/competitions/">competitions</a> <a href="https://raghakot.github.io/tag/migrated/"> migrated</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'Facebook hacker cup: Geometric approach to double squares problem'" href="https://twitter.com/intent/tweet?text=Facebook%20hacker%20cup%3A%20Geometric%20approach%20to%20double%20squares%20problem%20%C2%BB&amp;hashtags=competitions, migrated&amp;url=https://raghakot.github.io/">
        
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Facebook hacker cup: Geometric approach to double squares problem</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-competitions tag-migrated">
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Given an integer \(N\), we need to find the number of integral pairs \((x, y) \mid x^2 + y^2 = N\), \(N \in [0, 2147483647]\), with a maximum of 100 such numbers in a file.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_solution">Solution</h3>
<div class="paragraph">
<p>Geometrically, we know that \(x^2 + y^2 = r\) represents a circle centered at \((0,0)\) with a radius \(r\).  So, the problem can be interpreted visually as finding all possible solutions where \(x, y\) are positive, i.e., lie in the first quadrant.</p>
</div>
<div class="paragraph">
<p>Testing all possible integral pairs of \((x, y)\) upto \(N\) is equivalent to searching within the grayed geometric square as illustrated.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raghakot.github.io/images/post1/fig1.png" alt="fig1.png">
</div>
<div class="title">Figure 1. Geometric view of double squares problem</div>
</div>
<div class="paragraph">
<p>Algorithmically, this approach takes \(O(n^2)\) time. Consider the sample input as shown below (this was the file I received)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>20
1105
65
2147483646
1257431873
25
1000582589
1148284322
5525
0
1475149141
858320077
1022907856
1041493518
3
1215306625
372654318
160225
5928325
2147483643
1538292481</pre>
</div>
</div>
<div class="paragraph">
<p>On my machine, brute force approach takes approx 14 minutes (!!!) to solve this input. Clearly, we are exploring a lot of unwanted points. One obvious way to improve this is to explore points bounded by the circle as as indicated by the shaded blue square.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raghakot.github.io/images/post1/fig2.png" alt="fig2.png">
</div>
<div class="title">Figure 2. Improving on naive search</div>
</div>
<div class="paragraph">
<p>This makes intuitive sense since \(x, y\) cannot exceed \(\sqrt{n}\). This reduces the complexity from \(O(n^2)\) to \(O(n)\) reducing execution time from an earlier 14 minutes to 80.5 secs.</p>
</div>
<div class="paragraph">
<p>Can we do any better? Why explore the entire blue square? It is sufficient if we examine all points on the arc of the circle in the first quadrant. i.e, increment \(x\) from \([0, \sqrt{n}]\), compute corresponding \(y = \sqrt{n - x^2}\) and check if it is an integer. \(y\) is an integer if \(\lfloor y \rfloor == y\).</p>
</div>
<div class="paragraph">
<p>This looks pretty good. Is there anything else that can be improved upon? Well, if you notice the figure carefully, we don&#8217;t have to iterate \(x\) from \([0, \sqrt{n}]\). All points on one side of line \(y = x\) are mirror images of points on the other side. i.e., if we find a point, day \((3, 4)\) then we will find a mirror \((4, 3)\) on the other side. Since the problem doesn&#8217;t differentiate between these two solutions, it is sufficient if we iterate \(x\) from \([0, x']\), where \(x'\) is given by \(\sqrt{n} \cos{45} = \sqrt{n/2}\).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raghakot.github.io/images/post1/fig3.png" alt="fig3.png">
</div>
<div class="title">Figure 3. Line \(y = x\) acts as a mirror</div>
</div>
<div class="paragraph">
<p>With this, we can complete the algorithm in java as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">int getNumSumSquares(final int n)
{
	if(n == 0) {
		return 1;
    }

	final int iterations = (int) Math.ceil(Math.sqrt((n * 1.0)/2)) + 1;
	double y;
	int count = 0;
	for(int x = 0; x &lt;= iterations; x++)
	{
		y = Math.sqrt(n - (x*x));
		// check if y is an integer
		if (Math.floor(y) == y) {
			count++;
        }
	}
	return count;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This algorithm works in \(O(\sqrt{n/2}) \sim O(\sqrt{n})\). This only takes 0.047 secs to execute!</p>
</div>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'raghakot-github-io'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2017. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
    <script src="//raghakot.github.io/themes/uno-zen/assets/js/uno-zen.js?v=1484258545462" type="text/javascript" charset="utf-8"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-78195880-1', 'auto');
    ga('send', 'pageview');

    </script>
  </body>
</html>
